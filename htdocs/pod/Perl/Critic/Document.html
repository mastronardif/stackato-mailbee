<html><head><title>Perl::Critic::Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.012001 at Wed Apr 13 00:04:28 2011 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CAVEATS'>CAVEATS</a>
  <li class='indexItem indexItem1'><a href='#INTERFACE_SUPPORT'>INTERFACE SUPPORT</a>
  <li class='indexItem indexItem1'><a href='#CONSTRUCTOR'>CONSTRUCTOR</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Perl::Critic::Document - Caching wrapper around a PPI::Document.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use PPI::Document;
    use Perl::Critic::Document;
    my $doc = PPI::Document-&#62;new(&#39;Foo.pm&#39;);
    $doc = Perl::Critic::Document-&#62;new(-source =&#62; $doc);
    ## Then use the instance just like a PPI::Document</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Perl::Critic does a lot of iterations over the PPI document tree via the <code>PPI::Document::find()</code> method. To save some time, this class pre-caches a lot of the common <code>find()</code> calls in a single traversal. Then, on subsequent requests we return the cached data.</p>

<p>This is implemented as a facade, where method calls are handed to the stored <code>PPI::Document</code> instance.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS"
>CAVEATS</a></h1>

<p>This facade does not implement the overloaded operators from <a href="../../PPI/Document.html" class="podlinkpod"
>PPI::Document</a> (that is, the <code>use overload ...</code> work). Therefore, users of this facade must not rely on that syntactic sugar. So, for example, instead of <code>my $source = &#34;$doc&#34;;</code> you should write <code>my $source = $doc-</code>content();&#62;</p>

<p>Perhaps there is a CPAN module out there which implements a facade better than we do here?</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="INTERFACE_SUPPORT"
>INTERFACE SUPPORT</a></h1>

<p>This is considered to be a public class. Any changes to its interface will go through a deprecation cycle.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONSTRUCTOR"
>CONSTRUCTOR</a></h1>

<dl>
<dt><a name="new(-source_=&#62;_$source_code,_&#39;-filename-override&#39;_=&#62;_$filename,_&#39;-program-extensions&#39;_=&#62;_[program_extensions])"
><code>new(-source =&#62; $source_code, &#39;-filename-override&#39; =&#62; $filename, &#39;-program-extensions&#39; =&#62; [program_extensions])</code></a></dt>

<dd>
<p>Create a new instance referencing a PPI::Document instance. The <code>$source_code</code> can be the name of a file, a reference to a scalar containing actual source code, or a <a href="../../PPI/Document.html" class="podlinkpod"
>PPI::Document</a> or <a href="../../PPI/Document/File.html" class="podlinkpod"
>PPI::Document::File</a>.</p>

<p>In the event that <code>$source_code</code> is a reference to a scalar containing actual source code or a <a href="../../PPI/Document.html" class="podlinkpod"
>PPI::Document</a>, the resulting <a href="../../Perl/Critic/Document.html" class="podlinkpod"
>Perl::Critic::Document</a> will not have a filename. This may cause <a href="../../Perl/Critic/Document.html" class="podlinkpod"
>Perl::Critic::Document</a> to incorrectly classify the source code as a module or script. To avoid this problem, you can optionally set the <code>-filename-override</code> to force the <a href="../../Perl/Critic/Document.html" class="podlinkpod"
>Perl::Critic::Document</a> to have a particular <code>$filename</code>. Do not use this option if <code>$source_code</code> is already the name of a file, or is a reference to a <a href="../../PPI/Document/File.html" class="podlinkpod"
>PPI::Document::File</a>.</p>

<p>The &#39;-program-extensions&#39; argument is optional, and is a reference to a list of strings and/or regular expressions. The strings will be made into regular expressions matching the end of a file name, and any document whose file name matches one of the regular expressions will be considered a program.</p>

<p>If -program-extensions is not specified, or if it does not determine the document type, the document will be considered to be a program if the source has a shebang line or its file name (if any) matches <code>m/ [.] PL \z /smx</code>.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="ppi_document()"
><code>ppi_document()</code></a></dt>

<dd>
<p>Accessor for the wrapped PPI::Document instance. Note that altering this instance in any way can cause unpredictable failures in Perl::Critic&#39;s subsequent analysis because some caches may fall out of date.</p>

<dt><a name="find($wanted)"
><code>find($wanted)</code></a></dt>

<dd>
<dt><a name="find_first($wanted)"
><code>find_first($wanted)</code></a></dt>

<dd>
<dt><a name="find_any($wanted)"
><code>find_any($wanted)</code></a></dt>

<dd>
<p>Caching wrappers around the PPI methods. If <code>$wanted</code> is a simple PPI class name, then the cache is employed. Otherwise we forward the call to the corresponding method of the <code>PPI::Document</code> instance.</p>

<dt><a name="namespaces()"
><code>namespaces()</code></a></dt>

<dd>
<p>Returns a list of the namespaces (package names) in the document.</p>

<dt><a name="subdocuments_for_namespace($namespace)"
><code>subdocuments_for_namespace($namespace)</code></a></dt>

<dd>
<p>Returns a list of sub-documents containing the elements in the given namespace. For example, given that the current document is for the source</p>

<pre>    foo();
    package Foo;
    package Bar;
    package Foo;</pre>

<p>this method will return two <a href="../../Perl/Critic/Document.html" class="podlinkpod"
>Perl::Critic::Document</a>s for a parameter of <code>&#34;Foo&#34;</code>. For more, see <a href="../../PPIx/Utilities/Node.html#split_ppi_node_by_namespace" class="podlinkpod"
>&#34;split_ppi_node_by_namespace&#34; in PPIx::Utilities::Node</a>.</p>

<dt><a name="ppix_regexp_from_element($element)"
><code>ppix_regexp_from_element($element)</code></a></dt>

<dd>
<p>Caching wrapper around <code>PPIx::Regexp-&#62;new($element)</code>. If <code>$element</code> is a <code>PPI::Element</code> the cache is employed, otherwise it just returns the results of <code>PPIx::Regexp-&#62;new()</code>. In either case, it returns <code>undef</code> unless the argument is something that <a href="../../PPIx/Regexp.html" class="podlinkpod"
>PPIx::Regexp</a> actually understands.</p>

<dt><a name="filename()"
><code>filename()</code></a></dt>

<dd>
<p>Returns the filename for the source code if applicable (PPI::Document::File) or <code>undef</code> otherwise (PPI::Document).</p>

<dt><a name="isa(_$classname_)"
><code>isa( $classname )</code></a></dt>

<dd>
<p>To be compatible with other modules that expect to get a PPI::Document, the Perl::Critic::Document class masquerades as the PPI::Document class.</p>

<dt><a name="highest_explicit_perl_version()"
><code>highest_explicit_perl_version()</code></a></dt>

<dd>
<p>Returns a <a href="../../version.html" class="podlinkpod"
>version</a> object for the highest Perl version requirement declared in the document via a <code>use</code> or <code>require</code> statement. Returns nothing if there is no version statement.</p>

<dt><a name="uses_module($module_or_pragma_name)"
><code>uses_module($module_or_pragma_name)</code></a></dt>

<dd>
<p>Answers whether there is a <code>use</code>, <code>require</code>, or <code>no</code> of the given name in this document. Note that there is no differentiation of modules vs. pragmata here.</p>

<dt><a name="process_annotations()"
><code>process_annotations()</code></a></dt>

<dd>
<p>Causes this Document to scan itself and mark which lines &#38; policies are disabled by the <code>&#34;## no critic&#34;</code> annotations.</p>

<dt><a name="line_is_disabled_for_policy($line,_$policy_object)"
><code>line_is_disabled_for_policy($line, $policy_object)</code></a></dt>

<dd>
<p>Returns true if the given <code>$policy_object</code> or <code>$policy_name</code> has been disabled for at <code>$line</code> in this Document. Otherwise, returns false.</p>

<dt><a name="add_annotation(_$annotation_)"
><code>add_annotation( $annotation )</code></a></dt>

<dd>
<p>Adds an <code>$annotation</code> object to this Document.</p>

<dt><a name="annotations()"
><code>annotations()</code></a></dt>

<dd>
<p>Returns a list containing all the <a href="../../Perl/Critic/Annotation.html" class="podlinkpod"
>Perl::Critic::Annotation</a>s that were found in this Document.</p>

<dt><a name="add_suppressed_violation($violation)"
><code>add_suppressed_violation($violation)</code></a></dt>

<dd>
<p>Informs this Document that a <code>$violation</code> was found but not reported because it fell on a line that had been suppressed by a <code>&#34;## no critic&#34;</code> annotation. Returns <code>$self</code>.</p>

<dt><a name="suppressed_violations()"
><code>suppressed_violations()</code></a></dt>

<dd>
<p>Returns a list of references to all the <a href="../../Perl/Critic/Violation.html" class="podlinkpod"
>Perl::Critic::Violation</a>s that were found in this Document but were suppressed.</p>

<dt><a name="is_program()"
><code>is_program()</code></a></dt>

<dd>
<p>Returns whether this document is considered to be a program.</p>

<dt><a name="is_module()"
><code>is_module()</code></a></dt>

<dd>
<p>Returns whether this document is considered to be a Perl module.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Chris Dolan &#60;cdolan@cpan.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (c) 2006-2011 Chris Dolan.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself. The full text of this license can be found in the LICENSE file included with this module.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
