<html><head><title>Perl::Critic::Policy::ValuesAndExpressions::RequireConstantVersion</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.012001 at Wed Apr 13 00:04:30 2011 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#AFFILIATION'>AFFILIATION</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#CAVEATS'>CAVEATS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Perl::Critic::Policy::ValuesAndExpressions::RequireConstantVersion - Require $VERSION to be a constant rather than a computed value.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AFFILIATION"
>AFFILIATION</a></h1>

<p>This Policy is part of the core <a href="../../../../Perl/Critic.html" class="podlinkpod"
>Perl::Critic</a> distribution.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The $VERSION variable of a module should be a simple constant - either a number,
a single-quotish string,
or a &#39;use version&#39; object.
In the latter case the &#39;use version;&#39; must appear on the same line as the object construction.</p>

<p>Computing the version has problems of various severities.</p>

<p>The most benign violation is computing the version from (e.g.) a Subversion revision number:</p>

<pre>    our ($VERSION) = q$REVISION: 42$ =~ /(\d+)/;</pre>

<p>The problem here is that the version is tied to a single repository. The code can not be moved to another repository (even of the same type) without changing its version, possibly in the wrong direction.</p>

<p>This policy accepts v-strings (<code>v1.2.3</code> or just plain <code>1.2.3</code>), since these are already flagged by <a href="../../../../Perl/Critic/Policy/ValuesAndExpressions/ProhibitVersionStrings.html" class="podlinkpod"
>Perl::Critic::Policy::ValuesAndExpressions::ProhibitVersionStrings</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>The proper way to set a module&#39;s $VERSION to a <code>version</code> object is to <code>use version;</code> on the same line of code that assigns the value of $VERSION. That way, <a href="../../../../ExtUtils/MakeMaker.html" class="podlinkpod"
>ExtUtils::MakeMaker</a> and <a href="../../../../Module/Build.html" class="podlinkpod"
>Module::Build</a> can extract the version when packaging the module for CPAN. By default, this policy declares an error if this is not done.</p>

<p>Should you wish to allow version objects without loading the version module on the same line, add the following to your configuration file:</p>

<pre>    [ValuesAndExpressions::RequireConstantVersion]
    allow_version_without_use_on_same_line = 1</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS"
>CAVEATS</a></h1>

<p>There will be false negatives if the $VERSION appears on the left-hand side of a list assignment that assigns to more than one variable, or to <code>undef</code>.</p>

<p>There may be false positives if the $VERSION is assigned the value of a here document. This will probably remain the case until <a href="../../../../PPI/Token/HereDoc.html" class="podlinkpod"
>PPI::Token::HereDoc</a> acquires the relevant portions of the <a href="../../../../PPI/Token/Quote.html" class="podlinkpod"
>PPI::Token::Quote</a> interface.</p>

<p>There will be false positives if $VERSION is assigned the value of a constant created by the <a href="../../../../Readonly.html" class="podlinkpod"
>Readonly</a> module or the <a href="../../../../constant.html" class="podlinkpod"
>constant</a> pragma, because the necessary infrastructure appears not to exist, and the author of the present module lacked the knowledge/expertise/gumption to put it in place.</p>

<p>Currently the idiom</p>

<pre>    our $VERSION = &#39;1.005_05&#39;;
    $VERSION = eval $VERSION;</pre>

<p>will produce a violation on the second line of the example.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Thomas R. Wyant, III <em>wyant at cpan dot org</em></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (c) 2009-2011 Tom Wyant.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself. The full text of this license can be found in the LICENSE file included with this module</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
