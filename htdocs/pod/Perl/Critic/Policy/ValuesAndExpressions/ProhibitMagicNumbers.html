<html><head><title>Perl::Critic::Policy::ValuesAndExpressions::ProhibitMagicNumbers - Don&#39;t use values that don&#39;t explain themselves.</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.012001 at Wed Apr 13 00:04:30 2011 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#AFFILIATION'>AFFILIATION</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Ways_in_which_this_module_applies_this_rule.'>Ways in which this module applies this rule.</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#allowed_values'>allowed_values</a>
    <li class='indexItem indexItem2'><a href='#allowed_types'>allowed_types</a>
    <li class='indexItem indexItem2'><a href='#allow_to_the_right_of_a_fat_comma'>allow_to_the_right_of_a_fat_comma</a>
    <li class='indexItem indexItem2'><a href='#constant_creator_subroutines'>constant_creator_subroutines</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Perl::Critic::Policy::ValuesAndExpressions::ProhibitMagicNumbers - Don&#39;t use values that don&#39;t explain themselves.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AFFILIATION"
>AFFILIATION</a></h1>

<p>This Policy is part of the core <a href="../../../../Perl/Critic.html" class="podlinkpod"
>Perl::Critic</a> distribution.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>What is a &#34;magic number&#34;?
A magic number is a number that appears in code without any explanation; e.g.
<code>$bank_account_balance *= 57.492;</code>.
You look at that number and have to wonder where that number came from.
Since you don&#39;t understand the significance of the number,
you don&#39;t understand the code.</p>

<p>In general,
numeric literals other than <code>0</code> or <code>1</code> in should not be used.
Use the <a href="../../../../constant.html" class="podlinkpod"
>constant</a> pragma or the <a href="../../../../Readonly.html" class="podlinkpod"
>Readonly</a> or <a href="../../../../Const/Fast.html" class="podlinkpod"
>Const::Fast</a> modules to give a descriptive name to the number.</p>

<p>There are,
of course,
exceptions to when this rule should be applied.
One good example is positioning of objects in some container like shapes on a blueprint or widgets in a user interface.
In these cases,
the significance of a number can readily be determined by context.</p>

<p>The maximum number of violations per document for this policy defaults to 10.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Ways_in_which_this_module_applies_this_rule."
>Ways in which this module applies this rule.</a></h2>

<p>By default,
this rule is relaxed in that <code>2</code> is permitted to allow for common things like alternation,
the STDERR file handle,
etc..</p>

<p>Numeric literals are allowed in <code>use</code> and <code>require</code> statements to allow for things like Perl version restrictions and <a href="../../../../Test/More.html" class="podlinkpod"
>Test::More</a> plans.
Declarations of <code>$VERSION</code> package variables are permitted.
Use of <code>Readonly</code>,
<code>Readonly::Scalar</code>,
<code>Readonly::Array</code>,
and <code>Readonly::Hash</code> from the <a href="../../../../Readonly.html" class="podlinkpod"
>Readonly</a> module are obviously valid,
but use of <code>Readonly::Scalar1</code>,
<code>Readonly::Array1</code>,
and <code>Readonly::Hash1</code> are specifically not supported.</p>

<p>Use of binary,
exponential,
hexadecimal,
octal,
and version numbers,
even for <code>0</code> and <code>1</code>,
outside of <code>use</code>/<code>require</code>/<code>Readonly</code> statements aren&#39;t permitted (but you can change this).</p>

<p>There is a special exemption for accessing the last element of an array,
i.e.
<code>$x[-1]</code>.</p>

<pre>    $x = 0;                                   # ok
    $x = 0.0;                                 # ok
    $x = 1;                                   # ok
    $x = 1.0;                                 # ok
    $x = 1.5;                                 # not ok
    $x = 0b0                                  # not ok
    $x = 0b1                                  # not ok
    $x = 0x00                                 # not ok
    $x = 0x01                                 # not ok
    $x = 000                                  # not ok
    $x = 001                                  # not ok
    $x = 0e1                                  # not ok
    $x = 1e1                                  # not ok

    $frobnication_factor = 42;                # not ok
    use constant FROBNICATION_FACTOR =&#62; 42;   # ok


    use 5.6.1;                                # ok
    use Test::More plan =&#62; 57;                # ok
    plan tests =&#62; 39;                         # ok
    our $VERSION = 0.22;                      # ok


    $x = $y[-1]                               # ok
    $x = $y[-2]                               # not ok



    foreach my $solid (1..5) {                # not ok
        ...
    }


    use Readonly;

    Readonly my $REGULAR_GEOMETRIC_SOLIDS =&#62; 5;

    foreach my $solid (1..$REGULAR_GEOMETRIC_SOLIDS) {  #ok
        ...
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<p>This policy has four options: <code>allowed_values</code>, <code>allowed_types</code>, <code>allow_to_the_right_of_a_fat_comma</code>, and <code>constant_creator_subroutines</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="allowed_values"
><code>allowed_values</code></a></h2>

<p>The <code>allowed_values</code> parameter is a whitespace delimited set of permitted number <i>values</i>; this does not affect the permitted formats for numbers. The defaults are equivalent to having the following in your <em>.perlcriticrc</em>:</p>

<pre>    [ValuesAndExpressions::ProhibitMagicNumbers]
    allowed_values = 0 1 2</pre>

<p>Note that this policy forces the values <code>0</code> and <code>1</code> into the permitted values. Thus, specifying no values,</p>

<pre>    allowed_values =</pre>

<p>is the same as simply listing <code>0</code> and <code>1</code>:</p>

<pre>    allowed_values = 0 1</pre>

<p>The special <code>all_integers</code> value, not surprisingly, allows all integral values to pass, subject to the restrictions on number types.</p>

<p>Ranges can be specified as two (possibly fractional) numbers separated by two periods, optionally suffixed with an increment using the Perl 6 <code>:by()</code> syntax. E.g.</p>

<pre>    allowed_values = 7..10</pre>

<p>will allow 0, 1, 7, 8, 9, and 10 as literal values. Using fractional values like so</p>

<pre>    allowed_values = -3.5..-0.5:by(0.5)</pre>

<p>will permit -3.5, -3, -2.5, -2, -2.5, -1, -0.5, 0, and 1. Unsurprisingly, the increment defaults to 1, which means that</p>

<pre>    allowed_values = -3.5..-0.5</pre>

<p>will make -3.5, -2.5, -2.5, -0.5, 0, and 1 valid.</p>

<p>Ranges are not lazy, i.e. you&#39;d better have a lot of memory available if you use a range of <code>1..1000:by(0.01)</code>. Also remember that all of this is done using floating-point math, which means that <code>1..10:by(0.3333)</code> is probably not going to be very useful.</p>

<p>Specifying an upper limit that is less than the lower limit will result in no values being produced by that range. Negative increments are not permitted.</p>

<p>Multiple ranges are permitted.</p>

<p>To put this all together, the following is a valid, though not likely to be used, <em>.perlcriticrc</em> entry:</p>

<pre>    [ValuesAndExpressions::ProhibitMagicNumbers]
    allowed_values = 3.1415269 82..103 -507.4..57.8:by(0.2) all_integers</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="allowed_types"
><code>allowed_types</code></a></h2>

<p>The <code>allowed_types</code> parameter is a whitespace delimited set of subclasses of <a href="../../../../PPI/Token/Number.html" class="podlinkpod"
>PPI::Token::Number</a>.</p>

<p>Decimal integers are always allowed. By default, floating-point numbers are also allowed.</p>

<p>For example, to allow hexadecimal literals, you could configure this policy like</p>

<pre>    [ValuesAndExpressions::ProhibitMagicNumbers]
    allowed_types = Hex</pre>

<p>but without specifying anything for <code>allowed_values</code>, the allowed hexadecimal literals will be <code>0x00</code>, <code>0x01</code>, and <code>0x02</code>. Note, also, as soon as you specify a value for this parameter, you must include <code>Float</code> in the list to continue to be able to use floating point literals. This effect can be used to restrict literals to only decimal integers:</p>

<pre>    [ValuesAndExpressions::ProhibitMagicNumbers]
    allowed_types =</pre>

<p>If you permit exponential notation, you automatically also allow floating point values because an exponential is a subclass of floating-point in <a href="../../../../PPI.html" class="podlinkpod"
>PPI</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="allow_to_the_right_of_a_fat_comma"
><code>allow_to_the_right_of_a_fat_comma</code></a></h2>

<p>If this is set, you can put any number to the right of a fat comma.</p>

<pre>    my %hash =     ( a =&#62; 4512, b =&#62; 293 );         # ok
    my $hash_ref = { a =&#62; 4512, b =&#62; 293 };         # ok
    some_subroutine( a =&#62; 4512, b =&#62; 293 );         # ok</pre>

<p>Currently, this only means <i>directly</i> to the right of the fat comma. By default, this value is <i>true</i>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="constant_creator_subroutines"
><code>constant_creator_subroutines</code></a></h2>

<p>This parameter allows you to specify the names of subroutines that create constants, in addition to <code>Readonly</code>, <code>Const::Fast</code>, and friends. For example, if you use a custom <code>Const::Fast</code>-like module that supports a <code>create_constant</code> subroutine to create constants, you could add something like the following to your <em>.perlcriticrc</em>:</p>

<pre>    [ValuesAndExpressions::ProhibitMagicNumbers]
    constant_creator_subroutines = create_constant</pre>

<p>If you have more than one name to add, separate them by whitespace.</p>

<p>The subroutine name should appear exactly as it is in your code. For example, if your code does not import the creating subroutine subroutine, you would need to configure this policy as something like</p>

<pre>    [ValuesAndExpressions::ProhibitMagicNumbers]
    constant_creator_subroutines = create_constant Constant::Create::create_constant</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>There is currently no way to permit version numbers in regular code, even if you include them in the <code>allowed_types</code>. Some may actually consider this a feature.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Elliot Shank <code>&#60;perl@galumph.com&#62;</code></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (c) 2006-2011 Elliot Shank.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself. The full text of this license can be found in the LICENSE file included with this module.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
